#include "patches.h"
#include "main.h" // decomp

void func_802B5794(Mat4, Vec3f, Vec3f);
s32 func_802B4F60(s32, Vec3f, s32, f32, f32);
s32 render_set_position(Mat4, s32);
f32 func_802B51E8(Vec3f, Vec3f);
s32 get_angle_between_two_vectors(Vec3f, Vec3f);
u32 func_802B5258(Vec3f, Vec3s);
void func_802B5794(Mat4, Vec3f, Vec3f);
void vec3f_set(Vec3f, f32, f32, f32);
void vec3s_set(Vec3s, s16, s16, s16);
void* vec3f_copy_return(Vec3f, Vec3f);
void vec3s_copy(Vec3s, Vec3s);
void* vec3f_set_return(Vec3f, f32, f32, f32);
void mtxf_copy(Mat4, Mat4);
void mtxf_copy_n_element(s32*, s32*, s32);
void mtxf_identity(Mat4);
void add_translate_mat4_vec3f(Mat4, Mat4, Vec3f);
void add_translate_mat4_vec3f_lite(Mat4, Mat4, Vec3f);
void mtxf_translate(Mat4, Vec3f);
void func_802B5564(Mat4, u16*, f32, f32, f32, f32, f32);
void func_802B5794(Mat4, Vec3f, Vec3f);
void mtxf_rotate_x(Mat4, s16);
void mtxf_rotate_y(Mat4, s16);
void mtxf_s16_rotate_z(Mat4, s16);
void func_802B5B14(Vec3f b, Vec3s rotate); // unused
void func_802B5CAC(s16, s16, Vec3f);
void func_802B5D30(s16, s16, s32);
void set_course_lighting(Lights1*, s16, s16, s32);
void mtxf_scale(Mat4, f32);
void mtxf_pos_rotation_xyz(Mat4, Vec3f, Vec3s);
void mtxf_translate_vec3f_mat3(Vec3f, Mat3);
void mtxf_translate_vec3f_mat4(Vec3f, Mat4);
void func_802B64C4(Vec3f, s16);
void calculate_orientation_matrix(Mat3, f32, f32, f32, s16);
void calculate_rotation_matrix(Mat3, s16, f32, f32, f32);
void func_802B6BC0(Mat4, s16, f32, f32, f32);
void func_802B6D58(Mat4, Vec3f, Vec3f);
void mtxf_multiplication(Mat4, Mat4, Mat4);
void mtxf_to_mtx(Mtx*, Mat4);
u16 atan2_lookup(f32, f32);
u16 atan2s(f32, f32);
f32 atan2f(f32, f32);
s16 func_802B7C40(f32);
s16 func_802B7CA8(f32);
f32 calculate_vector_angle_xy(f32);
u16 random_u16(void);
u16 random_int(u16);
s16 func_802B7F34(f32, f32, f32, f32);
void func_802B7F7C(Vec3f, Vec3f, Vec3s);
f32 sins(u16);
f32 coss(u16);
s32 is_visible_between_angle(u16, u16, u16);
f32 is_within_render_distance(Vec3f, Vec3f, u16, f32, f32, f32);
void render_course_segments(uintptr_t addr, struct UnkStruct_800DC5EC* arg1);
void copy_framebuffer(s32, s32, s32, s32, u16*, u16*);
s32 func_80290C20(Camera* camera);
void init_rdp(void);
void init_z_buffer(void);
void init_rdp(void);
void func_802A40A4(void);
void func_802A40AC(void);
void func_802A40B4(void);
void func_802A40BC(void);
void func_802A40C4(void);
void func_802A40CC(void);
void func_802A40D4(void);
void func_802A40DC(void);
s32 set_viewport2(void);
void set_viewport(void);
void select_framebuffer(void);
void func_802A4300(void);
void course_set_skybox_colours(Vtx*);
void set_perspective_and_aspect_ratio(void);
void func_802A4EF4(void);
void func_802A5004(void);
void func_802A50EC(void);
void func_802A51D4(void);
void func_802A52BC(void);
void func_802A53A4(void);
void func_802A54A8(void);
void func_802A5590(void);
void func_802A5678(void);
void func_802A5760(void);
void render_player_one_1p_screen(void);
void render_player_one_2p_screen_vertical(void);
void render_player_two_2p_screen_vertical(void);
void render_player_one_2p_screen_horizontal(void);
void render_player_two_2p_screen_horizontal(void);
void render_player_one_3p_4p_screen(void);
void render_player_two_3p_4p_screen(void);
void render_player_three_3p_4p_screen(void);
void render_player_four_3p_4p_screen(void);
void func_802A74BC(void);
void copy_framebuffer(s32, s32, s32, s32, u16*, u16*);
void func_802A7728(void);
void func_802A7940(void);
void rsp_set_matrix_transformation(f32*, u16*, f32);
void set_color_render(s32 primRed, s32 primGreen, s32 primBlue, s32 envRed, s32 envGreen, s32 envBlue, s32 primAlpha);
void func_8028FBD4(void);
void play_sound2(s32 soundBits);
void func_800CA388(u8);
void func_80062B18(f32 *, f32 *, f32 *, f32, f32, f32, u16, u16);
void mtxf_translate_rotate(f32 (*dest)[4], f32 *pos, s16 *orientation);
void mtxf_scale2(f32 (*arg0)[4], f32 scale);
void convert_to_fixed_point_matrix(Mtx *dest, f32 (*src)[4]);
void func_8004B614(s32, s32, s32, s32, s32, s32, s32);

extern s16 gPlayersToRenderPlayerId[8];
extern s16 gPlayersToRenderScreenId[8];
extern Player* gPlayersToRenderPlayer[8];
extern s16 gMatrixEffectCount;
extern s32 D_80164AF4[3];
extern u8* sKartUpperTexture;
extern u8* sKartLowerTexture;
extern u16 gPlayerRedEffect[8];
extern u16 gPlayerGreenEffect[8];
extern u16 gPlayerBlueEffect[8];
extern u16 gPlayerCyanEffect[8];
extern u16 gPlayerMagentaEffect[8];
extern u16 gPlayerYellowEffect[8];
extern s32 D_80164B80[296];
extern s16 D_80165020[40];
extern Vec3f D_80165070[8];
extern s16 gLastAnimFrameSelector[4][8];
extern s16 gLastAnimGroupSelector[4][8];
extern s16 D_80165150[4][8];
extern s16 D_80165190[4][8];
extern s16 D_801651D0[4][8];
extern s32 sIntroModelTimer;
extern s32 D_802BA038;
extern s32 gMatrixHudCount;
extern Gfx common_rectangle_display[];
extern Vtx common_vtx_hedgehog[];
extern Vec3su D_80183E80;
extern u16 D_800DC5C8;
extern u16 D_800DC5CC;
extern s32 D_800DC5D0;
extern s32 D_800DC5D4;
extern s32 D_800DC5D8;
extern s32 D_800DC5DC;
extern s32 D_800DC5E0;
extern Gfx* luigi_raceway_dls[];
extern s16 gCurrentCourseId;
extern s16 D_800E43A8;
extern Mtx D_0D008E98;
extern Vtx* D_800DDBB4[];
extern struct_D_802F1F80* gPlayerPalette;
extern s32 D_8018D900[];
extern s16 D_8018D920[];
extern s32 D_8018D930[];
extern s32 D_8018D950[];
extern s32 D_8018D970[];
extern s32 D_8018D990[];
extern f32 D_800E3710[];
extern f32 D_800E3730[];
extern f32 D_800E3750[];
extern f32 D_800E3770[];
extern f32 D_800E37B0[];
extern f32 D_800E3790[];
extern f32 D_800E37D0[];
extern f32 D_800E37F0[];
extern s16 D_80165190[4][8];
extern f32 D_80165280[];
extern s32 gFrameSinceLastACombo[];
extern f32 gCharacterSize[];
extern u16 gPlayerPalettesList[][4][0x100 * 8];
extern union_D_802BFB80 D_802BFB80;
extern Camera cameras[4];
